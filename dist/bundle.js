var Tetris=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){const r=n(2);t.exports=r.app},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"vec2",function(){return l}),n.d(r,"copy",function(){return d}),n.d(r,"equal",function(){return f}),n.d(r,"limit",function(){return p}),n.d(r,"makeMap",function(){return m}),n.d(r,"round",function(){return g}),n.d(r,"makeAttribute",function(){return w}),n.d(r,"add",function(){return y}),n.d(r,"sub",function(){return v}),n.d(r,"mul",function(){return b}),n.d(r,"div",function(){return x}),n.d(r,"scale",function(){return E}),n.d(r,"setScale",function(){return A}),n.d(r,"addScale",function(){return L}),n.d(r,"length",function(){return z}),n.d(r,"normalize",function(){return P}),n.d(r,"direction",function(){return M}),n.d(r,"cscale",function(){return j}),n.d(r,"csub",function(){return S}),n.d(r,"cadd",function(){return k}),n.d(r,"cmul",function(){return q});const i=void 0!==window.performance?window.performance:Date,s=()=>i.now(),a=window.requestAnimationFrame;function o(t,e=60){let n=!1,r=s(),i=0,o=1e3/e,c=0;this.start=()=>n?this:(n=!0,r=s(),i=a(h),this),this.stop=()=>(n=!1,0!=i&&a.cancel(i),i=0,this);const h=e=>{const n=e;(c+=n-r)-o>-1&&(t(o),c=0),r=n,i=requestAnimationFrame(h)}}function c(){let t;this.init=e=>{t=e},this.api=()=>({load:e=>{t.load(e)}})}const h=[{test:"png|jpg",loader:function(t,{assetsUrl:e}){return new Promise(n=>{let r=new Image;r.onload=()=>{n(r)},r.src=e+t})}},{test:"json",loader:function(t,{assetsUrl:e}){return fetch(e+t).then(t=>t.json())}}];function u(t,e){e={assetsUrl:"",...e};let{assetsUrl:n}=e,r=[...h];const i={assetsUrl:n},s={};Object.keys(t).length;let a=0;this.progress=()=>a,this.get=t=>s[t],this.start=()=>Promise.all(Object.values(function(t,e){let n={};return Object.keys(t).forEach(r=>{n[r]=e(r,t[r])}),n}(t,(t,e)=>{return o(e)(e,i).then(e=>{s[t]=e,a++})}))).then(t=>s);const o=t=>{let[e,n]=t.split("."),i=r.find(({test:t})=>n.match(t));return i?i.loader:(console.warn(`Couldn't find loader for ${t}, ignoring.`),()=>Promise.resolve())}}function l(t=0,e=t){return[t,e]}function d(t,e=[]){return e[0]=t[0],e[1]=t[1],e}function f(t,e){return t[0]===e[0]&&t[1]===e[1]}function p(t,e){t[0]=Math.max(t[0],e[0]),t[0]=Math.min(t[0],e[1]),t[1]=Math.max(t[1],e[2]),t[1]=Math.min(t[1],e[3])}function m(t){return e=>(e[0]=t(e[0]),e[1]=t(e[1]),e)}const g=m(t=>Math.round(t));function w(t){return(e=t[0],n=t[1])=>(t[0]=e,t[1]=n,t)}function y(t,e,...n){return t[0]+=e[0],t[1]+=e[1],n.forEach(e=>{t[0]+=e[0],t[1]+=e[1]}),t}function v(t,e){return t[0]-=e[0],t[1]-=e[1],t}function b(t,e){return t[0]*=e[0],t[1]*=e[1],t}function x(t,e){return t[0]/=e[0],t[1]/=e[1],t}function E(t,e){return t[0]*=e,t[1]*=e,t}function A(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n}function L(t,e,n){return t[0]+=e[0]*n,t[1]+=e[1]*n,t}function z(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function P(t){return E(t,1/z(t)),t}function M(t,e){return P(S(e,t))}function j(t,e){return E(d(t),e)}function S(t,e){return v(d(t),e)}function k(t,e){return y(d(t),e)}function q(t,e){return b(d(t),e)}const{vec2:D}=r;function T(t){let e=this.data={touches:{}};function n(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}this.update=t=>{let{current:n,wheel:r}=e;r&&(r.handled?delete e.wheel:r.handled=!0),n&&(n.dpos=S(n.epos,n.start),n.tapping&&(n.tapping.handled?delete n.tapping:n.tapping.handled=!0),n.ending&&(n.ending.handled?delete e.current:n.ending.handled=!0))},this.bindTouch=()=>(function(t){const e=[],a=function(t){return function(e){e.preventDefault();const n=i(e);t.current={button:e.button,tapping:{},start:n,epos:n,dpos:D(0)}}}(t),o=function(t){return function(e){if(t.current){let{dpos:e}=t.current,n=s(e);t.current.ending={swipe:n}}}}(t),c=function(t){return function(e){const n=i(e);t.current&&(t.current.epos=n),t.epos=n}}(t),h=r(t);return["mousedown","touchstart"].forEach(t=>e.push(n(document,t,a))),["mousemove","touchmove"].forEach(t=>e.push(n(document,t,c))),["mouseup","touchend"].forEach(t=>e.push(n(document,t,o))),e.push(n(document,"wheel",h)),()=>{e.forEach(t=>t())}})(this.data);const r=t=>e=>{t.wheel={epos:i(e),y:Math.sign(e.deltaY)}},i=e=>{let n=(t=>t.clientX||0===t.clientX?[t.clientX,t.clientY]:t.touches&&t.targetTouches[0]?[t.targetTouches[0].clientX,t.targetTouches[0].clientY]:void 0)(e),{bounds:r}=t;return[n[0]-r.x,n[1]-r.y]};const s=t=>{let e={};return t[1]<-80?e.up=!0:t[1]>80&&(e.down=!0),t[0]<-80?e.left=!0:t[0]>80&&(e.right=!0),(e.up||e.down||e.left||e.right)&&(e.swiped=!0),e}}function O(){let t=this.data={};const e=t=>e=>n=>{n.code===e&&t(e)},n={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Space:"space",Enter:"enter",Escape:"escape"},r=e(e=>{t[n[e]]=!0}),i=e(e=>{t[n[e]]=!1});this.update=t=>{},this.bind=()=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Space","Enter","Escape"].forEach(t=>{C(document,"keydown",r(t)),C(document,"keyup",i(t))})}}function C(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}class U{constructor(t,e,n){this.l=t,this.c=e,this.n=n,this.p=null}r(){this.p?this.p.n=this.n:this.l.h=this.n,this.n&&(this.n.p=this.p)}}class _{constructor(){this.h=null}add(t){const e=new U(this,t,this.h);return this.h&&(this.h.p=e),this.h=e,e}i(t){let e=this.h;for(;e;)t(e.c),e=e.n}}const F={p:{t:0}};class I{constructor(t){this.z=t,this.o=new _,this.t=new _}add(t){t.remove(),t.l=this,t.n=(1!==t.a||0===t.frame.p.a?this.t:this.o).add(t)}}const B=(t,e)=>{const n=new I(0),r=[n],i=new ArrayBuffer(3407820),s=new Float32Array(i),a=new Uint32Array(i),{Point:o}=B,c=Object.assign({antialias:!1,alpha:!1},e),h=c.alpha?1:770,u=c.scale||1;delete c.scale;const l=t.getContext("webgl",c),d=l.getExtension("ANGLE_instanced_arrays"),f=(t,e)=>{const n=l.createShader(e);return l.shaderSource(n,t),l.compileShader(n),n},p=l.createProgram();l.attachShader(p,f("attribute vec2 g;\nattribute vec2 a;\nattribute vec2 t;\nattribute float r;\nattribute vec2 s;\nattribute vec4 u;\nattribute vec4 c;\nattribute float z;\nuniform mat4 m;\nvarying vec2 v;\nvarying vec4 i;\nvoid main(){\nv=u.xy+g*u.zw;\ni=c.abgr;\nvec2 p=(g-a)*s;\nfloat q=cos(r);\nfloat w=sin(r);\np=vec2(p.x*q-p.y*w,p.x*w+p.y*q);\np+=a+t;\ngl_Position=m*vec4(p,z,1);}",35633)),l.attachShader(p,f("precision mediump float;\nuniform sampler2D x;\nuniform float j;\nvarying vec2 v;\nvarying vec4 i;\nvoid main(){\nvec4 c=texture2D(x,v);\ngl_FragColor=c*i;\nif(j>0.0){\nif(c.a<j)discard;\ngl_FragColor.a=1.0;};}",35632)),l.linkProgram(p);const m=(t,e,n)=>{l.bindBuffer(t,l.createBuffer()),l.bufferData(t,e,n||35044)},g=(t,e,n,r,i,s,a)=>{const o=l.getAttribLocation(p,t);l.enableVertexAttribArray(o),l.vertexAttribPointer(o,e,s||5126,!!a,n||0,i||0),r&&d.vertexAttribDivisorANGLE(o,r)};m(34963,new Uint8Array([0,1,2,2,1,3])),m(34962,new Float32Array([0,0,0,1,1,0,1,1])),g("g",2),m(34962,i,35048),g("a",2,52,1),g("s",2,52,1,8),g("r",1,52,1,16),g("t",2,52,1,20),g("u",4,52,1,28),g("c",4,52,1,44,5121,!0),g("z",1,52,1,48);const w=t=>l.getUniformLocation(p,t),y=w("m"),v=w("x"),b=w("j");let x,E,A,L,z=0;const P=()=>{x=t.clientWidth*u|0,E=t.clientHeight*u|0;const e=t.width!==x||t.height!==E;return t.width=x,t.height=E,e},M=()=>{z&&(l.blendFunc(L?1:h,L?0:771),l.depthFunc(L?513:515),l.bindTexture(3553,A.p.t),l.uniform1i(v,A.p.t),l.uniform1f(b,L?A.p.a:0),l.bufferSubData(34962,0,s.subarray(0,13*z)),d.drawElementsInstancedANGLE(4,6,5121,0,z),z=0)},j=t=>{if(!t.visible)return;65535===z&&M();const{frame:e}=t,{uvs:n}=e;A.p.t!==e.p.t&&(A.p.t&&M(),A=e);let r=13*z;s[r++]=e.anchor.x,s[r++]=e.anchor.y,s[r++]=t.scale.x*e.size.x,s[r++]=t.scale.y*e.size.y,s[r++]=t.rotation,s[r++]=t.position.x,s[r++]=t.position.y,s[r++]=n[0],s[r++]=n[1],s[r++]=n[2],s[r++]=n[3],a[r++]=((16777215&t.tint)<<8|255*t.a&255)>>>0,s[r]=t.l.z,z++};let S,k=0,q=0;const D={gl:l,camera:{at:new o,to:new o,angle:0},background(t,e,n,r){l.clearColor(t,e,n,0===r?0:r||1)},layer(t){let e=r.find(e=>e.z===t);return e||(e=new I(t),r.push(e),r.sort((t,e)=>e.z-t.z)),e},add(t){n.add(t)},texture(t,e,n,r){const i=t.width,s=t.height,a=l.createTexture();return l.bindTexture(3553,a),l.texParameteri(3553,10240,9728|+n),l.texParameteri(3553,10241,9728|+n|+r<<8|+r<<1),l.texImage2D(3553,0,6408,6408,5121,t),r&&l.generateMipmap(3553),{size:new o(i,s),anchor:new o,uvs:[0,0,1,1],p:{a:0===e?0:e||1,t:a},frame(t,e,n){return{size:e,anchor:n||this.anchor,uvs:[t.x/i,t.y/s,e.x/i,e.y/s],p:this.p}}}},resize:P,render(){l.useProgram(p),l.enable(3042),l.enable(2929),k!=q&&(k=q,l.uniformMatrix4fv(y,!1,S)),l.viewport(0,0,x,E),l.clear(16640),A=F,L=!0,r.forEach(t=>t.o.i(j)),M(),L=!1;for(let t=r.length-1;t>=0;t--)r[t].t.i(j);M()}};return P(),S=(()=>{const{at:t,to:e,angle:n}=D.camera,r=t.x-x*e.x,i=t.y-E*e.y,s=Math.cos(n),a=Math.sin(n),o=2/x,c=-2/E;return[s*o,a*c,0,0,-a*o,s*c,0,0,0,0,-1e-5,0,(t.x*(1-s)+t.y*a)*o-2*r/x-1,(t.y*(1-s)-t.x*a)*c+2*i/E+1,0,1]})(),q++,D};B.Point=class{constructor(t,e){if(!(this instanceof B.Point))return new B.Point(t,e);this.set(t,e)}set(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this}},B.Sprite=class{constructor(t,e){Object.assign(this,{frame:t,visible:!0,position:new B.Point,rotation:0,scale:new B.Point(1),tint:16777215,a:1,l:null,n:null},e)}get width(){return this.frame.size.x*this.scale.x}set width(t){this.scale.x=t/this.frame.size.x}get height(){return this.frame.size.y*this.scale.y}set height(t){this.scale.y=t/this.frame.size.y}get alpha(){return this.a}set alpha(t){const e=t<1&&1===this.a||1===t&&this.a<1;this.a=t,e&&this.frame.p.a>0&&this.l&&this.l.add(this)}remove(){this.n&&this.n.r(),this.l=null,this.n=null}};var N=B;function $(t){const e=this.width=t.clientWidth,n=this.height=t.clientHeight,r=document.createElement("canvas");t.appendChild(r),r.width=e,r.height=n,this.bounds=t.getBoundingClientRect();const i=N(r);this.scene=i}function R(t){return{fourLayer:t.layer(4),threeLayer:t.layer(3),twoLayer:t.layer(2),oneLayer:t.layer(1),zeroLayer:t.layer(0),scene:t}}const{Point:X,Sprite:G}=N;function Y(t){return new G(t)}function H(t=0,e=t){return new X(t,e)}const W=t=>(e,n,r,i=r,s)=>t.frame(H(e,n),H(r,i),H(s,s));const Q=t=>V(256,256,(e,n,r,i)=>(i.fillStyle=t,i.fillRect(0,0,e,n),r));function V(t,e,n){var r=document.createElement("canvas");return r.width=t,r.height=e,n(t,e,r,r.getContext("2d")),r}function J(t,e){this.A=t,this.B=e;this.Mid=[(t[0]+e[0])/2,(t[1]+e[1])/2];let n=e[0]-t[0],r=e[1]-t[1];this.translate=this.scale=n=>{return new J(y(j(t,1-n),j(e,n)),y(j(t,n),j(e,1-n)))},this.pointFrom=(e,i)=>{return[t[0]+n*e-r*i,t[1]+r*e+n*i]}}function K(t,e){return new J(t,e)}function Z(t,e,n,r){let i,s,a,o,c,h;this.width=n,this.height=r,this.copy=()=>new Z(t,e,n,r),this.move=(u,l)=>{t=this.x=u,e=this.y=l,i=this.x1=t+n,s=this.y1=e+r,a=this.A=[t,e],o=this.B=[t,s],c=this.C=[i,s],h=this.D=[i,e],this.AB=K(a,o),this.BC=K(o,c),this.CD=K(c,h),this.DA=K(h,a)},this.move(t,e),this.contains=n=>t<n.x&&e<n.y&&i>n.x1&&s>n.y1,this.intersects=n=>!(t>n.x1||n.x>i)&&!(e>n.y1||n.y>s),this.containsPoint=(n,r)=>n>t&&n<i&&r>e&&r<s}function tt(t,e){e={name:"pool",warnLeak:400,...e};const n=(()=>{let t=0;return()=>t++})();let r=[],i=[];this.name=()=>e.name,this.alives=()=>r.length,this.total=()=>i.length+r.length,this.warnLeak=()=>e.warnLeak,this.toString=()=>`[${this.name()} alives: ${this.alives()} deads: ${i.length}]`,this.acquire=(e=(()=>{}))=>{let s;return this.total()>this.warnLeak()&&(console.warn(`possible pool leak at ${this.name()}.`),this.releaseLast()),e(s=i.length>0?i.pop():t(n())),r.push(s),s},this.acquireLimit=(t,e)=>{for(;this.alives()<e;)this.acquire(t)},this.release=t=>{this.releaseIndex(r.indexOf(t))},this.releaseIndex=t=>{t>-1&&i.push(r.splice(t,1)[0])},this.releaseLast=()=>{this.releaseIndex(0)},this.releaseAll=()=>{i=[...i,...r],r=[]},this.releaseIf=(t,e=(()=>{}))=>{let n=[],s=[];r.forEach(r=>{t(r)?(e(r),n.push(r)):s.push(r)}),r=s,i=[...n,...i]},this.reduce=(t,e)=>r.reduce(t,e),this.map=t=>r.map(t),this.flatMap=t=>r.flatMap(t),this.each=t=>{r.forEach(t)},this.find=t=>r.find(t)}function et(t,e,n){let r,i,s,{x:a,y:o,width:c,height:h,frame:u,alpha:l=1,angle:d=0}=n,f=Y(u);f.alpha=l,f.width=c,f.height=h,this.init=t=>{r=0,i=0,s=t};const p=()=>a+r,m=()=>o+i;this.data=()=>s,this.update=t=>{},this.visible=t=>f.visible=t,this.alpha=t=>f.alpha=t,this.pos=()=>[r,i],this.hitTest=(t,e)=>{let n=p(),r=n+c,i=m();return n<=t&&r>t&&i<=e&&i+h>e},this.move=(t,e)=>{r=t,i=e},this.rotate=t=>d=t,this.resize=(t,e)=>{c=t,h=e,f.width=c,f.height=h},this.frame=t=>{f.frame=t,f.width=c,f.height=h},this.add=t=>{t.add(f)},this.remove=()=>{f.remove()},this.render=()=>{f.position.set(p(),m()),f.rotation=d}}function nt(t,e,n){let{size:r,x:i,y:s}=n,a=r,o=a-.15*r;const{frames:c}=e,h=t=>Y(c["number"+t]);let u=[0,1,2,3,4,5,6,7,8,9].map(h),l=[",",","].map(h);const d=(t,e)=>{t.position.x=i+e,t.position.y=s,t.width=r,t.height=2*r},f=t=>{let e=0;t>1&&(t>2&&(t>3&&(t>4&&(t>5&&(t>6&&(d(u[6],e),e+=o,d(l[0],e),e+=o),d(u[5],e),e+=a),d(u[4],e),e+=a),d(u[3],e),e+=o,d(l[1],e),e+=o),d(u[2],e),e+=a),d(u[1],e),e+=a),d(u[0],e)};let p,m,g;f(),this.init=t=>{p=0,g=1},this.alpha=t=>{g=t},this.remove=()=>{u.forEach(t=>t.remove()),l.forEach(t=>t.remove())},this.add=t=>{u.forEach(e=>t.add(e)),l.forEach(e=>t.add(e))},this.setNumber=t=>{p!=t&&(m=t)},this.move=(t,e)=>{i=t,s=e,w()};const w=()=>{const t=function(t){const e=[];for(;t>0;)e.unshift(t%10),t=(t-t%10)/10;return e}(p);u.forEach(t=>t.alpha=0),l.forEach(t=>t.alpha=0),t.length>3&&(l[1].alpha=g),t.length>6&&(l[0].alpha=g),f(t.length),t.forEach((e,n)=>{const r=u[t.length-n-1];r.alpha=g,r.frame=c["number"+e]})};this.update=t=>{p!==m&&(p=m,w())},this.render=()=>{}}function rt(t,e=t,{yoyo:n}){let r=0,i=1;const s=()=>{t!==e?((()=>r=0)(),i=1):(()=>r=1)()};return{update(t){(r+=t*i)>1&&(r=1,n&&(i*=-1)),r<0&&(r=0,n&&(i*=-1))},settled:(t=1)=>r>=t,progress:(t=1)=>r,both(n,r=n){t=n,e=r,s()},target:t=>(t&&(e=t,s()),e),value:n=>(n&&(t=n,s()),(()=>t+(e-t)*r)()),easing:n=>(n=>t+(e-t)*n(r))(n)}}function it(t,e,n){const{frames:r,layers:{twoLayer:i}}=e;let s,a,o,c=new et(this,e,{x:0,y:0,width:20,height:20,frame:r.qPlus}),h=new nt(this,e,{x:0,y:0,size:20}),u=new rt(0,0,{});this.init=t=>{s=t.x,a=t.y,o=t.tap,u.both(0,1),h.setNumber(o),h.add(i),c.add(i)};const l=()=>{c.remove(),h.remove(),t.releaseIncrement(this)};this.update=t=>{u.update(.002*t),h.update(),c.update(),u.settled()&&l()},this.render=()=>{let t=u.value(),e=120*t,n=1-(t>.6?t:0);h.move(s,a-e),h.alpha(n),c.move(s+-24,10+a-e),c.alpha(n),h.render(),c.render()}}function st(t,e,n){let r,i=new tt(()=>new it(this,e,n));this.init=t=>{r=t.tapper},this.update=t=>{i.each(e=>e.update(t))},this.tap=(t,e,n)=>{i.acquire(r=>r.init({tap:t,x:e,y:n}))},this.releaseIncrement=t=>i.release(t),this.render=()=>{i.each(t=>t.render())}}function at(t,e,n){const{frames:r,layers:{zeroLayer:i,oneLayer:s}}=e;let a,o=new et(this,e,{x:0,y:0,width:n.width,height:n.height,frame:r.mdirt}),c=new nt(this,e,{x:n.score.x,y:n.score.y,size:20}),h=[];this.init=t=>{a=t.tapper,o.init({}),o.add(i),h.push(o),c.init({}),c.add(s),h.push(c)},this.update=t=>{c.setNumber(a.score()),h.forEach(e=>e.update(t))},this.render=()=>{h.forEach(t=>t.render())}}const ot=(t,e=50)=>{let n=!1;return(...r)=>{n||(n=!0,t(...r),setTimeout(()=>n=!1,e))}};function ct(t,e,n){const{events:r}=e;let i;this.init=t=>{i=t.tapper};const s=ot((e,n)=>{t.tap(e,n)},500);this.update=t=>{(()=>{const{current:t}=r.data;if(t){const{tapping:e,epos:n}=t;e&&s(...n)}})()},this.render=()=>{}}function ht(t,e,n){const{frames:r,layers:{zeroLayer:i,oneLayer:s}}=e;let a,o=[],c=new st(this,e,n),h=new at(this,e,n),u=new ct(this,e,n);this.init=t=>{a=t.tapper,u.init({tapper:a}),o.push(u),h.init({tapper:a}),o.push(h),c.init({tapper:a}),o.push(c)},this.tap=(t,e)=>{let n=a.doTap();c.tap(n,t,e)},this.update=t=>{o.forEach(e=>e.update(t))},this.render=()=>{o.forEach(t=>t.render())}}function ut(){let t=123245;this.score=()=>t,this.tap=()=>1,this.doTap=()=>(t+=1,1)}function lt(t){const{config:e,canvas:n,layers:{scene:r,zeroLayer:i},frames:s}=t,a=(()=>{const{width:t,height:e}=n;return{score:function(t,e,n,r){return new Z(t,e,n,r)}(10,10,20,20),width:t,height:e}})();let o=[],c=new ht(this,t,a);this.init=t=>{let e=new ut;c.init({tapper:e}),o.push(c)},this.update=t=>{o.forEach(e=>e.update(t))},this.render=()=>{o.forEach(t=>t.render())}}function dt(t,e){const n=new c;return new u({magic:"magic.png",numbers:"numbers.png"},{assetsUrl:"assets/images/"}).start().then(r=>{const i=new $(t),s=new T(i);s.bindTouch();const a=new O;a.bind();const c=function(t,e){const n=t.texture(e.magic),r=W(n),i=t.texture(e.numbers),s=W(i),a=t.texture(Q("white")),o=t.texture(Q("black")),c=t.texture(Q("#222222")),h=t.texture(Q("#dddddd")),u=t.texture(Q("#cccccc")),l=t.texture(Q("brown")),d=t.texture(Q("yellow")),f=t.texture(Q("red")),p=t.texture(Q("green")),m={};return[0,1,2,3,4,5,6,7,8,9,","].forEach((t,e)=>m["number"+t]=s(0,16*e,18,16)),m.qPlus=s(32,0,17,17),m.qDiv=s(64,0,18,17),m.qMinus=s(32,32,16,16),m.qDot=s(32,48,16,16),m.qQuestion=s(64,32,17,17),{mtree:r(0,0,8),mdirt:r(8,0,8),mdirtred:r(0,8,8),mdirtblue:r(8,8,8),mvill:r(16,0,8),mvillred:r(16,8,8),mvillblue:r(24,0,8),mmageright:r(0,16,8),mmageleft:r(8,16,8),mmagefront:r(0,24,8),mmageback:r(8,24,8),white:a,black:o,gray:c,gray2:h,gray3:u,brown:l,red:f,green:p,yellow:d,mage:d,platform:l,phandle:a,tPlay:f,toolbar:c,...m}}(i.scene,r);let h=new lt({config:function({events:t={}}){return{events:t}}(e),events:s,keyboard:a,assets:r,canvas:i,frames:c,layers:R(i.scene)});n.init(h),h.init({}),new o(t=>{s.update(t),h.update(t),h.render(),i.scene.render()}).start()}),n.api()}n.d(e,"app",function(){return dt})}]);